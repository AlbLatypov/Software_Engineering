# Docker documentation

<h1 class="scroll-mt-36">Volumes</h1><div class="block lg:hidden"><div class="not-prose"><div class="text-lg pb-0 lg:pb-2">Table of contents</div><nav class="toc"><ul class="pl-2"><li><a class="link lg:no-underline" href="#choose-the--v-or---mount-flag">Choose the -v or --mount flag</a></li><ul class="pl-2"><li><a class="link lg:no-underline" href="#differences-between--v-and---mount-behavior">Differences between &lt;code&gt;-v&lt;/code&gt; and &lt;code&gt;--mount&lt;/code&gt; behavior</a></li></ul><li><a class="link lg:no-underline" href="#create-and-manage-volumes">Create and manage volumes</a></li><li><a class="link lg:no-underline" href="#start-a-container-with-a-volume">Start a container with a volume</a></li><li><a class="link lg:no-underline" href="#use-a-volume-with-docker-compose">Use a volume with Docker Compose</a></li><ul class="pl-2"><li><a class="link lg:no-underline" href="#start-a-service-with-volumes">Start a service with volumes</a></li><ul class="pl-2"></ul><li><a class="link lg:no-underline" href="#populate-a-volume-using-a-container">Populate a volume using a container</a></li></ul><li><a class="link lg:no-underline" href="#use-a-read-only-volume">Use a read-only volume</a></li><li><a class="link lg:no-underline" href="#share-data-between-machines">Share data between machines</a></li><li><a class="link lg:no-underline" href="#use-a-volume-driver">Use a volume driver</a></li><ul class="pl-2"><li><a class="link lg:no-underline" href="#initial-setup">Initial setup</a></li><li><a class="link lg:no-underline" href="#create-a-volume-using-a-volume-driver">Create a volume using a volume driver</a></li><li><a class="link lg:no-underline" href="#start-a-container-which-creates-a-volume-using-a-volume-driver">Start a container which creates a volume using a volume driver</a></li><li><a class="link lg:no-underline" href="#create-a-service-which-creates-an-nfs-volume">Create a service which creates an NFS volume</a></li><ul class="pl-2"></ul><li><a class="link lg:no-underline" href="#create-cifssamba-volumes">Create CIFS/Samba volumes</a></li><li><a class="link lg:no-underline" href="#block-storage-devices">Block storage devices</a></li><ul class="pl-2"></ul></ul><li><a class="link lg:no-underline" href="#back-up-restore-or-migrate-data-volumes">Back up, restore, or migrate data volumes</a></li><ul class="pl-2"><li><a class="link lg:no-underline" href="#back-up-a-volume">Back up a volume</a></li><li><a class="link lg:no-underline" href="#restore-volume-from-a-backup">Restore volume from a backup</a></li></ul><li><a class="link lg:no-underline" href="#remove-volumes">Remove volumes</a></li><ul class="pl-2"><li><a class="link lg:no-underline" href="#remove-anonymous-volumes">Remove anonymous volumes</a></li><li><a class="link lg:no-underline" href="#remove-all-volumes">Remove all volumes</a></li></ul><li><a class="link lg:no-underline" href="#next-steps">Next steps</a></li></ul></nav></div><hr></div><p>Volumes are the preferred mechanism for persisting data generated by and used
by Docker containers. While
<a class="link" href="https://docs.docker.com/storage/bind-mounts/">bind mounts</a> are dependent on the
directory structure and OS of the host machine, volumes are completely managed by
Docker. Volumes have several advantages over bind mounts:</p><ul><li>Volumes are easier to back up or migrate than bind mounts.</li><li>You can manage volumes using Docker CLI commands or the Docker API.</li><li>Volumes work on both Linux and Windows containers.</li><li>Volumes can be more safely shared among multiple containers.</li><li>Volume drivers let you store volumes on remote hosts or cloud providers, encrypt the contents of volumes, or add other functionality.</li><li>New volumes can have their content pre-populated by a container.</li><li>Volumes on Docker Desktop have much higher performance than bind mounts from
Mac and Windows hosts.</li></ul><p>In addition, volumes are often a better choice than persisting data in a
container's writable layer, because a volume doesn't increase the size of the
containers using it, and the volume's contents exist outside the lifecycle of a
given container.</p><figure x-data="{ zoom: false }" @click="zoom = ! zoom" class="cursor-pointer hover:opacity-90"><img loading="lazy" src="../images/types-of-mounts-volume.webp?w=450&amp;h=300" alt="Volumes on the Docker host" width="450" height="300" class="rounded mx-auto">
<template x-teleport="body" data-teleport-template="true"><div x-show="zoom" @click="zoom = false" x-transition.opacity.duration.250ms="" class="fixed z-20 inset-0 flex items-center justify-center bg-black/70 p-6"><button class="text-white fixed z-30 top-6 right-8 icon-svg">
<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M480-438 270-228q-9 9-21 9t-21-9-9-21 9-21l210-210-210-210q-9-9-9-21t9-21 21-9 21 9l210 210 210-210q9-9 21-9t21 9 9 21-9 21L522-480l210 210q9 9 9 21t-9 21-21 9-21-9L480-438z"></path></svg>
</button>
<img loading="lazy" class="rounded max-w-full max-h-full" src="../images/types-of-mounts-volume.webp?w=450&amp;h=300" alt="Volumes on the Docker host"></div></template></figure><p>If your container generates non-persistent state data, consider using a
<a class="link" href="https://docs.docker.com/storage/tmpfs/">tmpfs mount</a> to avoid storing the data anywhere permanently, and to
increase the container's performance by avoiding writing into the container's
writable layer.</p><p>Volumes use <code>rprivate</code> bind propagation, and bind propagation isn't
configurable for volumes.</p><h2 class="scroll-mt-20" id="choose-the--v-or---mount-flag"><a class="text-black dark:text-white no-underline hover:underline" href="#choose-the--v-or---mount-flag">Choose the -v or --mount flag</a></h2><p>In general, <code>--mount</code> is more explicit and verbose. The biggest difference is that
the <code>-v</code> syntax combines all the options together in one field, while the <code>--mount</code>
syntax separates them. Here is a comparison of the syntax for each flag.</p><p>If you need to specify volume driver options, you must use <code>--mount</code>.</p><ul><li><p><code>-v</code> or <code>--volume</code>: Consists of three fields, separated by colon characters
(<code>:</code>). The fields must be in the correct order, and the meaning of each field
isn't immediately obvious.</p><ul><li>In the case of named volumes, the first field is the name of the volume, and is
unique on a given host machine. For anonymous volumes, the first field is
omitted.</li><li>The second field is the path where the file or directory are mounted in
the container.</li><li>The third field is optional, and is a comma-separated list of options, such
as <code>ro</code>. These options are discussed below.</li></ul></li><li><p><code>--mount</code>: Consists of multiple key-value pairs, separated by commas and each
consisting of a <code>&lt;key&gt;=&lt;value&gt;</code> tuple. The <code>--mount</code> syntax is more verbose
than <code>-v</code> or <code>--volume</code>, but the order of the keys isn't significant, and
the value of the flag is easier to understand.</p><ul><li>The <code>type</code> of the mount, which can be
<a class="link" href="https://docs.docker.com/storage/bind-mounts/"><code>bind</code></a>, <code>volume</code>, or
<a class="link" href="https://docs.docker.com/storage/tmpfs/"><code>tmpfs</code></a>. This topic discusses volumes, so the type is always
<code>volume</code>.</li><li>The <code>source</code> of the mount. For named volumes, this is the name of the volume.
For anonymous volumes, this field is omitted. Can be specified as <code>source</code>
or <code>src</code>.</li><li>The <code>destination</code> takes as its value the path where the file or directory
is mounted in the container. Can be specified as <code>destination</code>, <code>dst</code>,
or <code>target</code>.</li><li>The <code>readonly</code> option, if present, causes the bind mount to be
<a class="link" href="#use-a-read-only-volume">mounted into
the container as read-only</a>. Can be specified as <code>readonly</code> or <code>ro</code>.</li><li>The <code>volume-opt</code> option, which can be specified more than once, takes a
key-value pair consisting of the option name and its value.</li></ul></li></ul><blockquote class="warning"><p><strong>Warning</strong></p><p>If your volume driver accepts a comma-separated list as an option,
you must escape the value from the outer CSV parser. To escape a <code>volume-opt</code>,
surround it with double quotes (<code>"</code>) and surround the entire mount parameter
with single quotes (<code>'</code>).</p><p>For example, the <code>local</code> driver accepts mount options as a comma-separated
list in the <code>o</code> parameter. This example shows the correct way to escape the list.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBjcmVhdGUgXAogLS1tb3VudCAndHlwZT12b2x1bWUsc3JjPTxWT0xVTUUtTkFNRT4sZHN0PTxDT05UQUlORVItUEFUSD4sdm9sdW1lLWRyaXZlcj1sb2NhbCx2b2x1bWUtb3B0PXR5cGU9bmZzLHZvbHVtZS1vcHQ9ZGV2aWNlPTxuZnMtc2VydmVyPjo8bmZzLXBhdGg+LCJ2b2x1bWUtb3B0PW89YWRkcj08bmZzLWFkZHJlc3M+LHZlcnM9NCxzb2Z0LHRpbWVvPTE4MCxiZyx0Y3AscnciJwogLS1uYW1lIG15c2VydmljZSBcCiA8SU1BR0U+', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go"> --mount 'type=volume,src=&lt;VOLUME-NAME&gt;,dst=&lt;CONTAINER-PATH&gt;,volume-driver=local,volume-opt=type=nfs,volume-opt=device=&lt;nfs-server&gt;:&lt;nfs-path&gt;,"volume-opt=o=addr=&lt;nfs-address&gt;,vers=4,soft,timeo=180,bg,tcp,rw"'
</span></span></span><span class="line"><span class="cl"><span class="go"> --name myservice \
</span></span></span><span class="line"><span class="cl"><span class="go"> <var class="text-violet-light dark:text-violet-dark">IMAGE</var>
</span></span></span></code></pre></div></div></div></div></blockquote><p>The examples below show both the <code>--mount</code> and <code>-v</code> syntax where possible, with
<code>--mount</code> first.</p><h3 class="scroll-mt-20" id="differences-between--v-and---mount-behavior"><a class="text-black dark:text-white no-underline hover:underline" href="#differences-between--v-and---mount-behavior">Differences between -v and --mount behavior</a></h3><p>As opposed to bind mounts, all options for volumes are available for both
<code>--mount</code> and <code>-v</code> flags.</p><p>Volumes used with services, only support <code>--mount</code>.</p><h2 class="scroll-mt-20" id="create-and-manage-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#create-and-manage-volumes">Create and manage volumes</a></h2><p>Unlike a bind mount, you can create and manage volumes outside the scope of any
container.</p><p>Create a volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIGNyZWF0ZSBteS12b2w=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume create my-vol
</span></span></code></pre></div></div></div></div><p>List volumes:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIGxzCgpsb2NhbCAgICAgICAgICAgICAgIG15LXZvbA==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume ls
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">local               my-vol
</span></span></span></code></pre></div></div></div></div><p>Inspect a volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIGluc3BlY3QgbXktdm9sClsKICAgIHsKICAgICAgICAiRHJpdmVyIjogImxvY2FsIiwKICAgICAgICAiTGFiZWxzIjoge30sCiAgICAgICAgIk1vdW50cG9pbnQiOiAiL3Zhci9saWIvZG9ja2VyL3ZvbHVtZXMvbXktdm9sL19kYXRhIiwKICAgICAgICAiTmFtZSI6ICJteS12b2wiLAogICAgICAgICJPcHRpb25zIjoge30sCiAgICAgICAgIlNjb3BlIjogImxvY2FsIgogICAgfQpd', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume inspect my-vol
</span></span><span class="line"><span class="cl"><span class="go">[
</span></span></span><span class="line"><span class="cl"><span class="go">    {
</span></span></span><span class="line"><span class="cl"><span class="go">        "Driver": "local",
</span></span></span><span class="line"><span class="cl"><span class="go">        "Labels": {},
</span></span></span><span class="line"><span class="cl"><span class="go">        "Mountpoint": "/var/lib/docker/volumes/my-vol/_data",
</span></span></span><span class="line"><span class="cl"><span class="go">        "Name": "my-vol",
</span></span></span><span class="line"><span class="cl"><span class="go">        "Options": {},
</span></span></span><span class="line"><span class="cl"><span class="go">        "Scope": "local"
</span></span></span><span class="line"><span class="cl"><span class="go">    }
</span></span></span><span class="line"><span class="cl"><span class="go">]
</span></span></span></code></pre></div></div></div></div><p>Remove a volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIHJtIG15LXZvbA==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume rm my-vol
</span></span></code></pre></div></div></div></div><h2 class="scroll-mt-20" id="start-a-container-with-a-volume"><a class="text-black dark:text-white no-underline hover:underline" href="#start-a-container-with-a-volume">Start a container with a volume</a></h2><p>If you start a container with a volume that doesn't yet exist, Docker creates
the volume for you. The following example mounts the volume <code>myvol2</code> into
<code>/app/</code> in the container.</p><p>The <code>-v</code> and <code>--mount</code> examples below produce the same result. You can't run
them both unless you remove the <code>devtest</code> container and the <code>myvol2</code> volume
after running the first one.</p><div x-data="{ selected: '--mount' }" aria-role="tabpanel"><div aria-role="tablist" class="space-x-2"><button class="p-1 border-blue-light-500 border-b-4 dark:border-b-blue-dark-600" :class="selected === '--mount' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '--mount'">
<code>--mount</code>
</button>
<button class="p-1" :class="selected === '-v' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '-v'">
<code>-v</code></button></div><hr class="!mt-0"><div><div aria-role="tab" :class="selected !== '--mount' &amp;&amp; 'hidden'" class=""><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWUgZGV2dGVzdCBcCiAgLS1tb3VudCBzb3VyY2U9bXl2b2wyLHRhcmdldD0vYXBwIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name devtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount source=myvol2,target=/app \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div><div aria-role="tab" :class="selected !== '-v' &amp;&amp; 'hidden'" class="hidden"><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWUgZGV2dGVzdCBcCiAgLXYgbXl2b2wyOi9hcHAgXAogIG5naW54OmxhdGVzdA==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name devtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  -v myvol2:/app \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div></div><hr></div><p>Use <code>docker inspect devtest</code> to verify that Docker created the volume and it mounted
correctly. Look for the <code>Mounts</code> section:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'Ik1vdW50cyI6IFsKICAgIHsKICAgICAgICAiVHlwZSI6ICJ2b2x1bWUiLAogICAgICAgICJOYW1lIjogIm15dm9sMiIsCiAgICAgICAgIlNvdXJjZSI6ICIvdmFyL2xpYi9kb2NrZXIvdm9sdW1lcy9teXZvbDIvX2RhdGEiLAogICAgICAgICJEZXN0aW5hdGlvbiI6ICIvYXBwIiwKICAgICAgICAiRHJpdmVyIjogImxvY2FsIiwKICAgICAgICAiTW9kZSI6ICIiLAogICAgICAgICJSVyI6IHRydWUsCiAgICAgICAgIlByb3BhZ2F0aW9uIjogIiIKICAgIH0KXSw=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">"Mounts"</span><span class="err">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Type"</span><span class="p">:</span> <span class="s2">"volume"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Name"</span><span class="p">:</span> <span class="s2">"myvol2"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Source"</span><span class="p">:</span> <span class="s2">"/var/lib/docker/volumes/myvol2/_data"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Destination"</span><span class="p">:</span> <span class="s2">"/app"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Driver"</span><span class="p">:</span> <span class="s2">"local"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Mode"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"RW"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Propagation"</span><span class="p">:</span> <span class="s2">""</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span><span class="err">,</span></span></span></code></pre></div></div></div></div><p>This shows that the mount is a volume, it shows the correct source and
destination, and that the mount is read-write.</p><p>Stop the container and remove the volume. Note volume removal is a separate
step.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgY29udGFpbmVyIHN0b3AgZGV2dGVzdAoKJCBkb2NrZXIgY29udGFpbmVyIHJtIGRldnRlc3QKCiQgZG9ja2VyIHZvbHVtZSBybSBteXZvbDI=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker container stop devtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker container rm devtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker volume rm myvol2
</span></span></code></pre></div></div></div></div><h2 class="scroll-mt-20" id="use-a-volume-with-docker-compose"><a class="text-black dark:text-white no-underline hover:underline" href="#use-a-volume-with-docker-compose">Use a volume with Docker Compose</a></h2><p>The example below shows a single Docker Compose service with a volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'c2VydmljZXM6CiAgZnJvbnRlbmQ6CiAgICBpbWFnZTogbm9kZTpsdHMKICAgIHZvbHVtZXM6CiAgICAgIC0gbXlhcHA6L2hvbWUvbm9kZS9hcHAKdm9sdW1lczoKICBteWFwcDo=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">frontend</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">node:lts</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">myapp:/home/node/app</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="l">myapp:</span></span></span></code></pre></div></div></div></div><p>Running <code>docker compose up</code> for the first time creates a volume. Docker reuses the same volume when you run the command subsequently.</p><p>You can create a volume directly outside of Compose using <code>docker volume create</code> and
then reference it inside <code>compose.yaml</code> as follows:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'c2VydmljZXM6CiAgZnJvbnRlbmQ6CiAgICBpbWFnZTogbm9kZTpsdHMKICAgIHZvbHVtZXM6CiAgICAgIC0gbXlhcHA6L2hvbWUvbm9kZS9hcHAKdm9sdW1lczoKICBteWFwcDoKICAgIGV4dGVybmFsOiB0cnVl', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">frontend</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">node:lts</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">myapp:/home/node/app</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">myapp</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">external</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span></span></span></code></pre></div></div></div></div><p>For more information about using volumes with Compose, refer to the
<a class="link" href="https://docs.docker.com/compose/compose-file/07-volumes/">Volumes</a>
section in the Compose specification.</p><h3 class="scroll-mt-20" id="start-a-service-with-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#start-a-service-with-volumes">Start a service with volumes</a></h3><p>When you start a service and define a volume, each service container uses its own
local volume. None of the containers can share this data if you use the <code>local</code>
volume driver. However, some volume drivers do support shared storage.</p><p>The following example starts an <code>nginx</code> service with four replicas, each of which
uses a local volume called <code>myvol2</code>.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBjcmVhdGUgLWQgXAogIC0tcmVwbGljYXM9NCBcCiAgLS1uYW1lIGRldnRlc3Qtc2VydmljZSBcCiAgLS1tb3VudCBzb3VyY2U9bXl2b2wyLHRhcmdldD0vYXBwIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service create -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --replicas=4 \
</span></span></span><span class="line"><span class="cl"><span class="go">  --name devtest-service \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount source=myvol2,target=/app \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div><p>Use <code>docker service ps devtest-service</code> to verify that the service is running:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBwcyBkZXZ0ZXN0LXNlcnZpY2UKCklEICAgICAgICAgICAgICAgICAgTkFNRSAgICAgICAgICAgICAgICBJTUFHRSAgICAgICAgICAgICAgIE5PREUgICAgICAgICAgICAgICAgREVTSVJFRCBTVEFURSAgICAgICBDVVJSRU5UIFNUQVRFICAgICAgICAgICAgRVJST1IgICAgICAgICAgICAgICBQT1JUUwo0ZDdvejFqODV3d24gICAgICAgIGRldnRlc3Qtc2VydmljZS4xICAgbmdpbng6bGF0ZXN0ICAgICAgICBtb2J5ICAgICAgICAgICAgICAgIFJ1bm5pbmcgICAgICAgICAgICAgUnVubmluZyAxNCBzZWNvbmRzIGFnbw==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service ps devtest-service
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">ID                  NAME                IMAGE               NODE                DESIRED STATE       CURRENT STATE            ERROR               PORTS
</span></span></span><span class="line"><span class="cl"><span class="go">4d7oz1j85wwn        devtest-service.1   nginx:latest        moby                Running             Running 14 seconds ago
</span></span></span></code></pre></div></div></div></div><p>You can remove the service to stop the running tasks:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBybSBkZXZ0ZXN0LXNlcnZpY2U=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service rm devtest-service
</span></span></code></pre></div></div></div></div><p>Removing the service doesn't remove any volumes created by the service.
Volume removal is a separate step.</p><h4 class="scroll-mt-20" id="syntax-differences-for-services"><a class="text-black dark:text-white no-underline hover:underline" href="#syntax-differences-for-services">Syntax differences for services</a></h4><p>The <code>docker service create</code> command doesn't support the <code>-v</code> or <code>--volume</code> flag.
When mounting a volume into a service's containers, you must use the <code>--mount</code>
flag.</p><h3 class="scroll-mt-20" id="populate-a-volume-using-a-container"><a class="text-black dark:text-white no-underline hover:underline" href="#populate-a-volume-using-a-container">Populate a volume using a container</a></h3><p>If you start a container which creates a new volume, and the container
has files or directories in the directory to be mounted such as <code>/app/</code>,
Docker copies the directory's contents into the volume. The container then
mounts and uses the volume, and other containers which use the volume also
have access to the pre-populated content.</p><p>To show this, the following example starts an <code>nginx</code> container and
populates the new volume <code>nginx-vol</code> with the contents of the container's
<code>/usr/share/nginx/html</code> directory. This is where Nginx stores its default HTML
content.</p><p>The <code>--mount</code> and <code>-v</code> examples have the same end result.</p><div x-data="{ selected: '--mount' }" aria-role="tabpanel"><div aria-role="tablist" class="space-x-2"><button class="p-1 border-blue-light-500 border-b-4 dark:border-b-blue-dark-600" :class="selected === '--mount' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '--mount'">
<code>--mount</code>
</button>
<button class="p-1" :class="selected === '-v' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '-v'">
<code>-v</code></button></div><hr class="!mt-0"><div><div aria-role="tab" :class="selected !== '--mount' &amp;&amp; 'hidden'" class=""><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWU9bmdpbnh0ZXN0IFwKICAtLW1vdW50IHNvdXJjZT1uZ2lueC12b2wsZGVzdGluYXRpb249L3Vzci9zaGFyZS9uZ2lueC9odG1sIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name=nginxtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount source=nginx-vol,destination=/usr/share/nginx/html \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div><div aria-role="tab" :class="selected !== '-v' &amp;&amp; 'hidden'" class="hidden"><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWU9bmdpbnh0ZXN0IFwKICAtdiBuZ2lueC12b2w6L3Vzci9zaGFyZS9uZ2lueC9odG1sIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name=nginxtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  -v nginx-vol:/usr/share/nginx/html \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div></div><hr></div><p>After running either of these examples, run the following commands to clean up
the containers and volumes. Note volume removal is a separate step.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgY29udGFpbmVyIHN0b3Agbmdpbnh0ZXN0CgokIGRvY2tlciBjb250YWluZXIgcm0gbmdpbnh0ZXN0CgokIGRvY2tlciB2b2x1bWUgcm0gbmdpbngtdm9s', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker container stop nginxtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker container rm nginxtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker volume rm nginx-vol
</span></span></code></pre></div></div></div></div><h2 class="scroll-mt-20" id="use-a-read-only-volume"><a class="text-black dark:text-white no-underline hover:underline" href="#use-a-read-only-volume">Use a read-only volume</a></h2><p>For some development applications, the container needs to write into the bind
mount so that changes are propagated back to the Docker host. At other times,
the container only needs read access to the data. Multiple
containers can mount the same volume. You can simultaneously mount a
single volume as <code>read-write</code> for some containers and as <code>read-only</code> for others.</p><p>The following example changes the one above. It mounts the directory as a read-only
volume, by adding <code>ro</code> to the (empty by default) list of options, after the
mount point within the container. Where multiple options are present, you can separate
them using commas.</p><p>The <code>--mount</code> and <code>-v</code> examples have the same result.</p><div x-data="{ selected: '--mount' }" aria-role="tabpanel"><div aria-role="tablist" class="space-x-2"><button class="p-1 border-blue-light-500 border-b-4 dark:border-b-blue-dark-600" :class="selected === '--mount' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '--mount'">
<code>--mount</code>
</button>
<button class="p-1" :class="selected === '-v' &amp;&amp;
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'" @click="selected = '-v'">
<code>-v</code></button></div><hr class="!mt-0"><div><div aria-role="tab" :class="selected !== '--mount' &amp;&amp; 'hidden'" class=""><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWU9bmdpbnh0ZXN0IFwKICAtLW1vdW50IHNvdXJjZT1uZ2lueC12b2wsZGVzdGluYXRpb249L3Vzci9zaGFyZS9uZ2lueC9odG1sLHJlYWRvbmx5IFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name=nginxtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount source=nginx-vol,destination=/usr/share/nginx/html,readonly \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div><div aria-role="tab" :class="selected !== '-v' &amp;&amp; 'hidden'" class="hidden"><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWU9bmdpbnh0ZXN0IFwKICAtdiBuZ2lueC12b2w6L3Vzci9zaGFyZS9uZ2lueC9odG1sOnJvIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name=nginxtest \
</span></span></span><span class="line"><span class="cl"><span class="go">  -v nginx-vol:/usr/share/nginx/html:ro \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div></div></div><hr></div><p>Use <code>docker inspect nginxtest</code> to verify that Docker created the read-only mount
correctly. Look for the <code>Mounts</code> section:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'Ik1vdW50cyI6IFsKICAgIHsKICAgICAgICAiVHlwZSI6ICJ2b2x1bWUiLAogICAgICAgICJOYW1lIjogIm5naW54LXZvbCIsCiAgICAgICAgIlNvdXJjZSI6ICIvdmFyL2xpYi9kb2NrZXIvdm9sdW1lcy9uZ2lueC12b2wvX2RhdGEiLAogICAgICAgICJEZXN0aW5hdGlvbiI6ICIvdXNyL3NoYXJlL25naW54L2h0bWwiLAogICAgICAgICJEcml2ZXIiOiAibG9jYWwiLAogICAgICAgICJNb2RlIjogIiIsCiAgICAgICAgIlJXIjogZmFsc2UsCiAgICAgICAgIlByb3BhZ2F0aW9uIjogIiIKICAgIH0KXSw=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="s2">"Mounts"</span><span class="err">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Type"</span><span class="p">:</span> <span class="s2">"volume"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Name"</span><span class="p">:</span> <span class="s2">"nginx-vol"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Source"</span><span class="p">:</span> <span class="s2">"/var/lib/docker/volumes/nginx-vol/_data"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Destination"</span><span class="p">:</span> <span class="s2">"/usr/share/nginx/html"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Driver"</span><span class="p">:</span> <span class="s2">"local"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Mode"</span><span class="p">:</span> <span class="s2">""</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"RW"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">"Propagation"</span><span class="p">:</span> <span class="s2">""</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span><span class="err">,</span></span></span></code></pre></div></div></div></div><p>Stop and remove the container, and remove the volume. Volume removal is a
separate step.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgY29udGFpbmVyIHN0b3Agbmdpbnh0ZXN0CgokIGRvY2tlciBjb250YWluZXIgcm0gbmdpbnh0ZXN0CgokIGRvY2tlciB2b2x1bWUgcm0gbmdpbngtdm9s', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker container stop nginxtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker container rm nginxtest
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="gp">$</span> docker volume rm nginx-vol
</span></span></code></pre></div></div></div></div><h2 class="scroll-mt-20" id="share-data-between-machines"><a class="text-black dark:text-white no-underline hover:underline" href="#share-data-between-machines">Share data between machines</a></h2><p>When building fault-tolerant applications, you may need to configure multiple
replicas of the same service to have access to the same files.</p><figure x-data="{ zoom: false }" @click="zoom = ! zoom" class="cursor-pointer hover:opacity-90"><img loading="lazy" src="../images/volumes-shared-storage.webp" alt="shared storage" class="rounded mx-auto">
<template x-teleport="body" data-teleport-template="true"><div x-show="zoom" @click="zoom = false" x-transition.opacity.duration.250ms="" class="fixed z-20 inset-0 flex items-center justify-center bg-black/70 p-6"><button class="text-white fixed z-30 top-6 right-8 icon-svg">
<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M480-438 270-228q-9 9-21 9t-21-9-9-21 9-21l210-210-210-210q-9-9-9-21t9-21 21-9 21 9l210 210 210-210q9-9 21-9t21 9 9 21-9 21L522-480l210 210q9 9 9 21t-9 21-21 9-21-9L480-438z"></path></svg>
</button>
<img loading="lazy" class="rounded max-w-full max-h-full" src="../images/volumes-shared-storage.webp" alt="shared storage"></div></template></figure><p>There are several ways to achieve this when developing your applications.
One is to add logic to your application to store files on a cloud object
storage system like Amazon S3. Another is to create volumes with a driver that
supports writing files to an external storage system like NFS or Amazon S3.</p><p>Volume drivers allow you to abstract the underlying storage system from the
application logic. For example, if your services use a volume with an NFS
driver, you can update the services to use a different driver. For example, to
store data in the cloud, without changing the application logic.</p><h2 class="scroll-mt-20" id="use-a-volume-driver"><a class="text-black dark:text-white no-underline hover:underline" href="#use-a-volume-driver">Use a volume driver</a></h2><p>When you create a volume using <code>docker volume create</code>, or when you start a
container which uses a not-yet-created volume, you can specify a volume driver.
The following examples use the <code>vieux/sshfs</code> volume driver, first when creating
a standalone volume, and then when starting a container which creates a new
volume.</p><h3 class="scroll-mt-20" id="initial-setup"><a class="text-black dark:text-white no-underline hover:underline" href="#initial-setup">Initial setup</a></h3><p>The following example assumes that you have two nodes, the first of which is a Docker
host and can connect to the second node using SSH.</p><p>On the Docker host, install the <code>vieux/sshfs</code> plugin:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcGx1Z2luIGluc3RhbGwgLS1ncmFudC1hbGwtcGVybWlzc2lvbnMgdmlldXgvc3NoZnM=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker plugin install --grant-all-permissions vieux/sshfs
</span></span></code></pre></div></div></div></div><h3 class="scroll-mt-20" id="create-a-volume-using-a-volume-driver"><a class="text-black dark:text-white no-underline hover:underline" href="#create-a-volume-using-a-volume-driver">Create a volume using a volume driver</a></h3><p>This example specifies an SSH password, but if the two hosts have shared keys
configured, you can exclude the password. Each volume driver may have zero or more
configurable options, you specify each of them using an <code>-o</code> flag.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIGNyZWF0ZSAtLWRyaXZlciB2aWV1eC9zc2hmcyBcCiAgLW8gc3NoY21kPXRlc3RAbm9kZTI6L2hvbWUvdGVzdCBcCiAgLW8gcGFzc3dvcmQ9dGVzdHBhc3N3b3JkIFwKICBzc2h2b2x1bWU=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume create --driver vieux/sshfs <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  -o sshcmd=test@node2:/home/test \
</span></span></span><span class="line"><span class="cl"><span class="go">  -o password=testpassword \
</span></span></span><span class="line"><span class="cl"><span class="go">  sshvolume
</span></span></span></code></pre></div></div></div></div><h3 class="scroll-mt-20" id="start-a-container-which-creates-a-volume-using-a-volume-driver"><a class="text-black dark:text-white no-underline hover:underline" href="#start-a-container-which-creates-a-volume-using-a-volume-driver">Start a container which creates a volume using a volume driver</a></h3><p>The following example specifies an SSH password. However, if the two hosts have
shared keys configured, you can exclude the password.
Each volume driver may have zero or more configurable options.</p><blockquote><p><strong>Note</strong></p><p>If the volume driver requires you to pass any options,
you must use the <code>--mount</code> flag to mount the volume, and not <code>-v</code>.</p></blockquote><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1kIFwKICAtLW5hbWUgc3NoZnMtY29udGFpbmVyIFwKICAtLXZvbHVtZS1kcml2ZXIgdmlldXgvc3NoZnMgXAogIC0tbW91bnQgc3JjPXNzaHZvbHVtZSx0YXJnZXQ9L2FwcCx2b2x1bWUtb3B0PXNzaGNtZD10ZXN0QG5vZGUyOi9ob21lL3Rlc3Qsdm9sdW1lLW9wdD1wYXNzd29yZD10ZXN0cGFzc3dvcmQgXAogIG5naW54OmxhdGVzdA==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name sshfs-container \
</span></span></span><span class="line"><span class="cl"><span class="go">  --volume-driver vieux/sshfs \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount src=sshvolume,target=/app,volume-opt=sshcmd=test@node2:/home/test,volume-opt=password=testpassword \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div><h3 class="scroll-mt-20" id="create-a-service-which-creates-an-nfs-volume"><a class="text-black dark:text-white no-underline hover:underline" href="#create-a-service-which-creates-an-nfs-volume">Create a service which creates an NFS volume</a></h3><p>The following example shows how you can create an NFS volume when creating a service.
It uses <code>10.0.0.10</code> as the NFS server and <code>/var/docker-nfs</code> as the exported directory on the NFS server.
Note that the volume driver specified is <code>local</code>.</p><h4 class="scroll-mt-20" id="nfsv3"><a class="text-black dark:text-white no-underline hover:underline" href="#nfsv3">NFSv3</a></h4><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBjcmVhdGUgLWQgXAogIC0tbmFtZSBuZnMtc2VydmljZSBcCiAgLS1tb3VudCAndHlwZT12b2x1bWUsc291cmNlPW5mc3ZvbHVtZSx0YXJnZXQ9L2FwcCx2b2x1bWUtZHJpdmVyPWxvY2FsLHZvbHVtZS1vcHQ9dHlwZT1uZnMsdm9sdW1lLW9wdD1kZXZpY2U9Oi92YXIvZG9ja2VyLW5mcyx2b2x1bWUtb3B0PW89YWRkcj0xMC4wLjAuMTAnIFwKICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service create -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --name nfs-service \
</span></span></span><span class="line"><span class="cl"><span class="go">  --mount 'type=volume,source=nfsvolume,target=/app,volume-driver=local,volume-opt=type=nfs,volume-opt=device=:/var/docker-nfs,volume-opt=o=addr=10.0.0.10' \
</span></span></span><span class="line"><span class="cl"><span class="go">  nginx:latest
</span></span></span></code></pre></div></div></div></div><h4 class="scroll-mt-20" id="nfsv4"><a class="text-black dark:text-white no-underline hover:underline" href="#nfsv4">NFSv4</a></h4><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgc2VydmljZSBjcmVhdGUgLWQgXAogICAgLS1uYW1lIG5mcy1zZXJ2aWNlIFwKICAgIC0tbW91bnQgJ3R5cGU9dm9sdW1lLHNvdXJjZT1uZnN2b2x1bWUsdGFyZ2V0PS9hcHAsdm9sdW1lLWRyaXZlcj1sb2NhbCx2b2x1bWUtb3B0PXR5cGU9bmZzLHZvbHVtZS1vcHQ9ZGV2aWNlPTovdmFyL2RvY2tlci1uZnMsInZvbHVtZS1vcHQ9bz1hZGRyPTEwLjAuMC4xMCxydyxuZnN2ZXJzPTQsYXN5bmMiJyBcCiAgICBuZ2lueDpsYXRlc3Q=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker service create -d <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">    --name nfs-service \
</span></span></span><span class="line"><span class="cl"><span class="go">    --mount 'type=volume,source=nfsvolume,target=/app,volume-driver=local,volume-opt=type=nfs,volume-opt=device=:/var/docker-nfs,"volume-opt=o=addr=10.0.0.10,rw,nfsvers=4,async"' \
</span></span></span><span class="line"><span class="cl"><span class="go">    nginx:latest
</span></span></span></code></pre></div></div></div></div><h3 class="scroll-mt-20" id="create-cifssamba-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#create-cifssamba-volumes">Create CIFS/Samba volumes</a></h3><p>You can mount a Samba share directly in Docker without configuring a mount point on your host.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIGNyZWF0ZSBcCgktLWRyaXZlciBsb2NhbCBcCgktLW9wdCB0eXBlPWNpZnMgXAoJLS1vcHQgZGV2aWNlPS8vdXh4eHh4LnlvdXItc2VydmVyLmRlL2JhY2t1cCBcCgktLW9wdCBvPWFkZHI9dXh4eHh4LnlvdXItc2VydmVyLmRlLHVzZXJuYW1lPXV4eHh4eHh4LHBhc3N3b3JkPSoqKioqLGZpbGVfbW9kZT0wNzc3LGRpcl9tb2RlPTA3NzcgXAoJLS1uYW1lIGNpZi12b2x1bWU=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume create <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">	--driver local \
</span></span></span><span class="line"><span class="cl"><span class="go">	--opt type=cifs \
</span></span></span><span class="line"><span class="cl"><span class="go">	--opt device=//uxxxxx.your-server.de/backup \
</span></span></span><span class="line"><span class="cl"><span class="go">	--opt o=addr=uxxxxx.your-server.de,username=uxxxxxxx,password=*****,file_mode=0777,dir_mode=0777 \
</span></span></span><span class="line"><span class="cl"><span class="go">	--name cif-volume
</span></span></span></code></pre></div></div></div></div><p>The <code>addr</code> option is required if you specify a hostname instead of an IP.
This lets Docker perform the hostname lookup.</p><h3 class="scroll-mt-20" id="block-storage-devices"><a class="text-black dark:text-white no-underline hover:underline" href="#block-storage-devices">Block storage devices</a></h3><p>You can mount a block storage device, such as an external drive or a drive partition, to a container.
The following example shows how to create and use a file as a block storage device,
and how to mount the block device as a container volume.</p><blockquote class="important"><p><strong>Important</strong></p><p>The following procedure is only an example.
The solution illustrated here isn't recommended as a general practice.
Don't attempt this approach unless you're confident about what you're doing.</p></blockquote><h4 class="scroll-mt-20" id="how-mounting-block-devices-works"><a class="text-black dark:text-white no-underline hover:underline" href="#how-mounting-block-devices-works">How mounting block devices works</a></h4><p>Under the hood, the <code>--mount</code> flag using the <code>local</code> storage driver invokes the
Linux <code>mount</code> syscall and forwards the options you pass to it unaltered.
Docker doesn't implement any additional functionality on top of the native mount features supported by the Linux kernel.</p><p>If you're familiar with the
<a class="link" href="https://man7.org/linux/man-pages/man8/mount.8.html" target="_blank" rel="noopener">Linux <code>mount</code> command<span class="pl-1 icon-svg icon-sm"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M180-120q-24 0-42-18t-18-42v-6e2q0-24 18-42t42-18h249q12.75.0 21.375 8.675 8.625 8.676 8.625 21.5.0 12.825-8.625 21.325T429-780H180v6e2h6e2v-249q0-12.75 8.675-21.375 8.676-8.625 21.5-8.625 12.825.0 21.325 8.625T840-429v249q0 24-18 42t-42 18H180zm6e2-617L403-360q-9 9-21 8.5t-21-9.5-9-21 9-21l377-377H549q-12.75.0-21.375-8.675-8.625-8.676-8.625-21.5.0-12.825 8.625-21.325T549-840h291v291q0 12.75-8.675 21.375-8.676 8.625-21.5 8.625-12.825.0-21.325-8.625T780-549v-188z"></path></svg></span></a>,
you can think of the <code>--mount</code> options as forwarded to the <code>mount</code> command in the following manner:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBtb3VudCAtdCA8bW91bnQudm9sdW1lLW9wdC50eXBlPiA8bW91bnQudm9sdW1lLW9wdC5kZXZpY2U+IDxtb3VudC5kc3Q+IC1vIDxtb3VudC52b2x1bWUtb3B0cy5vPg==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mount -t &lt;mount.volume-opt.type&gt; &lt;mount.volume-opt.device&gt; &lt;mount.dst&gt; -o &lt;mount.volume-opts.o&gt;
</span></span></code></pre></div></div></div></div><p>To explain this further, consider the following <code>mount</code> command example.
This command mounts the <code>/dev/loop5</code> device to the path <code>/external-drive</code> on the system.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBtb3VudCAtdCBleHQ0IC9kZXYvbG9vcDUgL2V4dGVybmFsLWRyaXZl', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mount -t ext4 /dev/loop5 /external-drive
</span></span></code></pre></div></div></div></div><p>The following <code>docker run</code> command achieves a similar result, from the point of view of the container being run.
Running a container with this <code>--mount</code> option sets up the mount in the same way as if you had executed the
<code>mount</code> command from the previous example.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIFwKICAtLW1vdW50PSd0eXBlPXZvbHVtZSxkc3Q9L2V4dGVybmFsLWRyaXZlLHZvbHVtZS1kcml2ZXI9bG9jYWwsdm9sdW1lLW9wdD1kZXZpY2U9L2Rldi9sb29wNSx2b2x1bWUtb3B0PXR5cGU9ZXh0NCc=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --mount='type=volume,dst=/external-drive,volume-driver=local,volume-opt=device=/dev/loop5,volume-opt=type=ext4'
</span></span></span></code></pre></div></div></div></div><p>You can't run the <code>mount</code> command inside the container directly,
because the container is unable to access the <code>/dev/loop5</code> device.
That's why the <code>docker run</code> command uses the <code>--mount</code> option.</p><h4 class="scroll-mt-20" id="example-mounting-a-block-device-in-a-container"><a class="text-black dark:text-white no-underline hover:underline" href="#example-mounting-a-block-device-in-a-container">Example: Mounting a block device in a container</a></h4><p>The following steps create an <code>ext4</code> filesystem and mounts it into a container.
The filesystem support of your system depends on the version of the Linux kernel you are using.</p><ol><li><p>Create a file and allocate some space to it:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBmYWxsb2NhdGUgLWwgMUcgZGlzay5yYXc=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> fallocate -l 1G disk.raw
</span></span></code></pre></div></div></div></div></li><li><p>Build a filesystem onto the <code>disk.raw</code> file:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBta2ZzLmV4dDQgZGlzay5yYXc=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mkfs.ext4 disk.raw
</span></span></code></pre></div></div></div></div></li><li><p>Create a loop device:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBsb3NldHVwIC1mIC0tc2hvdyBkaXNrLnJhdwovZGV2L2xvb3A1', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> losetup -f --show disk.raw
</span></span><span class="line"><span class="cl"><span class="go">/dev/loop5
</span></span></span></code></pre></div></div></div></div><blockquote><p><strong>Note</strong></p><p><code>losetup</code> creates an ephemeral loop device that's removed after
system reboot, or manually removed with <code>losetup -d</code>.</p></blockquote></li><li><p>Run a container that mounts the loop device as a volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC1pdCAtLXJtIFwKICAtLW1vdW50PSd0eXBlPXZvbHVtZSxkc3Q9L2V4dGVybmFsLWRyaXZlLHZvbHVtZS1kcml2ZXI9bG9jYWwsdm9sdW1lLW9wdD1kZXZpY2U9L2Rldi9sb29wNSx2b2x1bWUtb3B0PXR5cGU9ZXh0NCcgXAogIHVidW50dSBiYXNo', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -it --rm <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span><span class="go">  --mount='type=volume,dst=/external-drive,volume-driver=local,volume-opt=device=/dev/loop5,volume-opt=type=ext4' \
</span></span></span><span class="line"><span class="cl"><span class="go">  ubuntu bash
</span></span></span></code></pre></div></div></div></div><p>When the container starts, the path <code>/external-drive</code> mounts the
<code>disk.raw</code> file from the host filesystem as a block device.</p></li><li><p>When you're done, and the device is unmounted from the container,
detach the loop device to remove the device from the host system:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBsb3NldHVwIC1kIC9kZXYvbG9vcDU=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> losetup -d /dev/loop5
</span></span></code></pre></div></div></div></div></li></ol><h2 class="scroll-mt-20" id="back-up-restore-or-migrate-data-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#back-up-restore-or-migrate-data-volumes">Back up, restore, or migrate data volumes</a></h2><p>Volumes are useful for backups, restores, and migrations.
Use the <code>--volumes-from</code> flag to create a new container that mounts that volume.</p><h3 class="scroll-mt-20" id="back-up-a-volume"><a class="text-black dark:text-white no-underline hover:underline" href="#back-up-a-volume">Back up a volume</a></h3><p>For example, create a new container named <code>dbstore</code>:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC12IC9kYmRhdGEgLS1uYW1lIGRic3RvcmUgdWJ1bnR1IC9iaW4vYmFzaA==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -v /dbdata --name dbstore ubuntu /bin/bash
</span></span></code></pre></div></div></div></div><p>In the next command:</p><ul><li>Launch a new container and mount the volume from the <code>dbstore</code> container</li><li>Mount a local host directory as <code>/backup</code></li><li>Pass a command that tars the contents of the <code>dbdata</code> volume to a <code>backup.tar</code> file inside our <code>/backup</code> directory.</li></ul><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC0tcm0gLS12b2x1bWVzLWZyb20gZGJzdG9yZSAtdiAkKHB3ZCk6L2JhY2t1cCB1YnVudHUgdGFyIGN2ZiAvYmFja3VwL2JhY2t1cC50YXIgL2RiZGF0YQ==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run --rm --volumes-from dbstore -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/backup ubuntu tar cvf /backup/backup.tar /dbdata
</span></span></code></pre></div></div></div></div><p>When the command completes and the container stops, it creates a backup of
the <code>dbdata</code> volume.</p><h3 class="scroll-mt-20" id="restore-volume-from-a-backup"><a class="text-black dark:text-white no-underline hover:underline" href="#restore-volume-from-a-backup">Restore volume from a backup</a></h3><p>With the backup just created, you can restore it to the same container,
or to another container that you created elsewhere.</p><p>For example, create a new container named <code>dbstore2</code>:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC12IC9kYmRhdGEgLS1uYW1lIGRic3RvcmUyIHVidW50dSAvYmluL2Jhc2g=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run -v /dbdata --name dbstore2 ubuntu /bin/bash
</span></span></code></pre></div></div></div></div><p>Then, un-tar the backup file in the new container’s data volume:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC0tcm0gLS12b2x1bWVzLWZyb20gZGJzdG9yZTIgLXYgJChwd2QpOi9iYWNrdXAgdWJ1bnR1IGJhc2ggLWMgImNkIC9kYmRhdGEgJiYgdGFyIHh2ZiAvYmFja3VwL2JhY2t1cC50YXIgLS1zdHJpcCAxIg==', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run --rm --volumes-from dbstore2 -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/backup ubuntu bash -c <span class="s2">"cd /dbdata &amp;&amp; tar xvf /backup/backup.tar --strip 1"</span>
</span></span></code></pre></div></div></div></div><p>You can use the techniques above to automate backup, migration, and restore
testing using your preferred tools.</p><h2 class="scroll-mt-20" id="remove-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#remove-volumes">Remove volumes</a></h2><p>A Docker data volume persists after you delete a container. There are two types
of volumes to consider:</p><ul><li>Named volumes have a specific source from outside the container, for example, <code>awesome:/bar</code>.</li><li>Anonymous volumes have no specific source. Therefore, when the container is deleted, you can instruct the Docker Engine daemon to remove them.</li></ul><h3 class="scroll-mt-20" id="remove-anonymous-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#remove-anonymous-volumes">Remove anonymous volumes</a></h3><p>To automatically remove anonymous volumes, use the <code>--rm</code> option. For example,
this command creates an anonymous <code>/foo</code> volume. When you remove the container,
the Docker Engine removes the <code>/foo</code> volume but not the <code>awesome</code> volume.</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgcnVuIC0tcm0gLXYgL2ZvbyAtdiBhd2Vzb21lOi9iYXIgYnVzeWJveCB0b3A=', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker run --rm -v /foo -v awesome:/bar busybox top
</span></span></code></pre></div></div></div></div><blockquote><p><strong>Note</strong></p><p>If another container binds the volumes with
<code>--volumes-from</code>, the volume definitions are <em>copied</em> and the
anonymous volume also stays after the first container is removed.</p></blockquote><h3 class="scroll-mt-20" id="remove-all-volumes"><a class="text-black dark:text-white no-underline hover:underline" href="#remove-all-volumes">Remove all volumes</a></h3><p>To remove all unused volumes and free up space:</p><div class="scroll-mt-20" x-data="" x-ref="root"><div class="group relative"><button x-data="{ code: 'JCBkb2NrZXIgdm9sdW1lIHBydW5l', copying: false }" class="absolute right-3 top-3 z-20 text-gray-light-300 dark:text-gray-dark-600" title="copy" @click="window.navigator.clipboard.writeText(atob(code).replaceAll(/^[\$>]\s+/gm, ''));
      copying = true;
      setTimeout(() => copying = false, 2000);">
<span :class="{ 'group-hover:block' : !copying }" class="icon-svg hidden group-hover:block"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="M3e2-2e2q-24 0-42-18t-18-42v-560q0-24 18-42t42-18h440q24 0 42 18t18 42v560q0 24-18 42t-42 18H3e2zM180-80q-24 0-42-18t-18-42v-590q0-13 8.5-21.5T150-760t21.5 8.5T180-730v590h470q13 0 21.5 8.5T680-110t-8.5 21.5T650-80H180z"></path></svg></span>
<span :class="{ 'group-hover:block' : copying }" class="icon-svg hidden"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 -960 960 960"><path d="m421-389-98-98q-9-9-22-9t-23 10q-9 9-9 22t9 22l122 123q9 9 21 9t21-9l239-239q10-10 10-23t-10-23q-10-9-23.5-8.5T635-603L421-389zm59 309q-82 0-155-31.5t-127.5-86-86-127.5T80-480q0-83 31.5-156t86-127T325-848.5 480-880q83 0 156 31.5T763-763t85.5 127T880-480q0 82-31.5 155T763-197.5t-127 86T480-80z"></path></svg></span></button><div class="syntax-light dark:syntax-dark"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> docker volume prune
</span></span></code></pre></div></div></div></div><h2 class="scroll-mt-20" id="next-steps"><a class="text-black dark:text-white no-underline hover:underline" href="#next-steps">Next steps</a></h2><ul><li>Learn about
<a class="link" href="https://docs.docker.com/storage/bind-mounts/">bind mounts</a>.</li><li>Learn about
<a class="link" href="https://docs.docker.com/storage/tmpfs/">tmpfs mounts</a>.</li><li>Learn about
<a class="link" href="/storage/storagedriver/">storage drivers</a>.</li><li>Learn about
<a class="link" href="/engine/extend/legacy_plugins/">third-party volume driver plugins</a>.</li></ul>
