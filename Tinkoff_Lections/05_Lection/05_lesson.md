# Лекторий по SRE: SLA, SLO, SLI 

Как будем оценивать надежность сервисов.

Проблема оценки работы SRE - как понять, сколько сбоев не случилось из-за того, что поработали SRE?

### SLI - Service Level Indicators

<p align="center">
 <img width="1000px" src="/Tinkoff_Lections/05_Lection/SLI.png">
</p>
<br>

Индикаторы - это метрики, не все(не ЦПУ, не память) которые отражают показатель пользовательского опыта, что может быть пользователю интересно:
- время ответа нашего сервиса
- сколько мы возвращаем ошибок
- отказы в обслуживании
- количество объявлений, которые мы сумели разместить и реализовать
- правильно работающий поиск и другие. 
- проберы, если тесты проходят хорошо, тоже может быть индикатором
- если страдает поиск при реализации различных фич
- оценивать точность и время подачи  машины (такси)

Индикаторы надо проектировать, и договариваться с бизнесом какие это будут индикаторы. Действительно ли они отражают качество нашего сервиса.

Суть в том, что СРИ совместно с бизнесом определяет существенные индикаторы и выбирают __приемлимый диапазон значений__, который называется:

### SLO - Service Level Objectives

<p align="center">
 <img width="1000px" src="/Tinkoff_Lections/05_Lection/SLO.png">
</p>
<br>

На примере такси, если мы ошибаемся во времени подачи на 10 минут - это неприемлимо, а если на 1 минуту - приемлимо.

Если все индикаторы укладываются, то мы помечаем это время хорошим, нет - плохим. Подсчет долей хорошее/плохое время и таким образом можно проводить оценку.

Обычно, это 99 и каждая следующая 9 дается с трудом и стоит очень дорого. 

Допущения:
- включаются равноценные индикаторы
- не учитывается сезонность (день ночь, особые периоды времени), минута в разное время стоит одинаково.

А как настроить подсчет метрик? Сделать это если не программировать сложно. Кастомный код для анализа всех метрик важных для SLO, расчет процента надежности.

За какой промежуток времени 99,9%? День, год? Традиционно берут месяц, квартал.

Если к этой цифре привязана возможность релиза, то неправильно выбранный период можно сильно ограничивать. Это нужно учитывать при обсуждении договоренностей.

Применение.

Обсуждение с командами графиков недоступности, часовых, когда были сбои, когда нет. Попытка вычистить эти графики, совместно. Похоже на филисофию командной работы devops.

### Бюджет ошибок

Если 99,9% доступности, 0,1% можем позволить себе иметь неработающую систему: эксперименты, релизы которые необходимо внедять с даунтаймом.

Расходуется бюджет ошибок на искусственное выключение. Грубо говоря, противоаварийная тренировка с реальными действиями.

Первоначально устанавливать желаемый уровень аккуратно. Завышение чревато.

### SLA - Service Level Agreement

<p align="center">
 <img width="1000px" src="/Tinkoff_Lections/05_Lection/SLA.png">
</p>
<br>

Изначально, было некое юридическое соглашение о том, что будет если договоренности не выдерживаются.

SLA - некое обобщенное понятие SLI SLO, нечеткий неопределенный термин.




